(function(t){function e(e){for(var i,o,a=e[0],c=e[1],u=e[2],d=0,h=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&h.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(h.length)h.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,a=1;a<s.length;a++){var c=s[a];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={app:0},r=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("85ec"),n=s.n(i);n.a},"14b3":function(t,e,s){"use strict";var i=s("edf4"),n=s.n(i);n.a},1619:function(t,e,s){},"1ed9":function(t,e,s){},2454:function(t,e,s){"use strict";var i=s("6140"),n=s.n(i);n.a},"300d":function(t,e,s){},4908:function(t,e,s){"use strict";var i=s("5d88"),n=s.n(i);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("4de4"),s("fb6a"),s("a9e3"),s("b680"),s("ac1f"),s("5319"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("a026"),n=s("bc3a"),r=s.n(n),o={baseURL:""},a=r.a.create(o);Plugin.install=function(t,e){t.axios=a,window.axios=a,Object.defineProperties(t.prototype,{axios:{get:function(){return a}},$axios:{get:function(){return a}}})},i["default"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},u=[],l={name:"App",created:function(){console.log(1),sessionStorage.getItem("userName")&&this.$store.commit("updateUser",sessionStorage.getItem("userName"))}},d=l,h=(s("034f"),s("2877")),p=Object(h["a"])(d,c,u,!1,null,null,null),m=p.exports,f=(s("45fc"),s("8c4f")),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",[s("el-header",{attrs:{height:"10vh"}},[t.user?s("el-dropdown",{staticStyle:{margin:"0.5em 4em"},attrs:{"split-button":"",type:"success"},on:{command:t.handleClick}},[s("i",{staticClass:"el-icon-user"},[t._v(" "+t._s(t.user))]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"a"}},[t._v("我的详情")]),s("el-dropdown-item",{attrs:{command:"b"}},[t._v("购物车")]),s("el-dropdown-item",{attrs:{command:"c"}},[t._v("机器人")]),s("el-dropdown-item",{attrs:{command:"d"}},[t._v("退出账号")])],1)],1):s("el-button",{staticStyle:{margin:"0.5em 4em"},attrs:{type:"primary"},on:{click:t.loginClick}},[t._v(" 点击登录 ")])],1),s("el-container",[s("el-aside",{attrs:{width:"18vw"}},[s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"},on:{select:t.handleSelect}},[s("el-menu-item",{attrs:{index:"1"}},[s("span",{staticStyle:{"font-size":"20px"},attrs:{slot:"title"},slot:"title"},[t._v("全部商品")])]),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("span",{staticStyle:{"font-size":"20px"}},[t._v("鱼竿")])]),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"台钓竿"}},[t._v("台钓竿")]),s("el-menu-item",{attrs:{index:"海竿"}},[t._v("海竿")])],1)],2),s("el-submenu",{attrs:{index:"3"}},[s("template",{slot:"title"},[s("span",{staticStyle:{"font-size":"20px"}},[t._v("钓箱钓椅")])]),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"钓箱"}},[t._v("钓箱")]),s("el-menu-item",{attrs:{index:"钓椅"}},[t._v("钓椅")]),s("el-menu-item",{attrs:{index:"钓箱钓椅配件"}},[t._v("钓箱钓椅配件")])],1)],2)],1)],1),s("el-main",[s("el-row",{attrs:{gutter:1}},t._l(t.shop,(function(e){return s("el-col",{key:e.id,attrs:{span:6}},[s("el-card",{staticStyle:{"margin-bottom":"1px"},attrs:{"body-style":{padding:"0px",margin:"0px"}}},[s("img",{staticClass:"image",attrs:{src:"/api/"+e.picture}}),s("div",{staticStyle:{padding:"14px"}},[s("div",{staticClass:"span",attrs:{title:e.name}},[t._v(" "+t._s(t._f("shopName")(e.name))+" ")]),s("div",{staticClass:"bottom clearfix"},[s("span",{staticClass:"time"},[t._v("¥ "+t._s(t._f("shopPrice")(e.price)))]),s("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(s){return t.goShop(e.id)}}},[t._v("查看商品")])],1)])])],1)})),1)],1)],1)],1)},g=[],_={data:function(){return{shop:[]}},computed:{user:{get:function(){return this.$store.state.user},set:function(t){this.$store.commit("updateUser",t)}}},methods:{getShop:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(1==e)var s="/product/list";else s="/product/list?type='".concat(e,"'");this.axios.get(s).then((function(e){console.log(e.data),t.shop=e.data}))},handleSelect:function(t){console.log(t),this.getShop(t)},loginClick:function(){this.$router.push("login")},handleClick:function(t){"a"===t&&this.$router.push("userDetail"),"b"===t&&this.$router.push("shopList"),"c"===t&&this.$router.push("socket"),"d"===t&&(this.$store.commit("updateUser",""),sessionStorage.removeItem("userName"))},goShop:function(t){this.$router.push("/shopDetail/".concat(t))}},created:function(){this.getShop()},mounted:function(){console.log("user:"+this.$store.state.user)}},b=_,k=(s("d969"),Object(h["a"])(b,v,g,!1,null,"79edddba",null)),y=k.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"kuang"},[s("div",{staticClass:"a",class:{active:t.isActive},on:{click:t.login}},[t._v("登录")]),s("div",{staticClass:"b",class:{active:!t.isActive},on:{click:t.regist}},[t._v("注册")])]),s("div",{staticClass:"demo-ruleForm"},[t.isActive?s("el-form",{key:"1",ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[s("el-form-item",{attrs:{label:"登录名",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入手机号登录",list:"phoneName"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}}),t.localPhone?s("datalist",{attrs:{id:"phoneName"}},t._l(t.localPhone,(function(t,e){return s("option",{key:e,domProps:{value:t}})})),0):t._e()],1),s("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.ruleForm.pwd,callback:function(e){t.$set(t.ruleForm,"pwd",e)},expression:"ruleForm.pwd"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("登录")]),s("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1):s("el-form",{key:"2",ref:"registForm",attrs:{model:t.registForm,rules:t.rules,"label-width":"100px",size:"medium"}},[s("el-form-item",{attrs:{label:"注册手机号",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入手机号作为登录账号"},model:{value:t.registForm.name,callback:function(e){t.$set(t.registForm,"name",e)},expression:"registForm.name"}})],1),s("el-form-item",{attrs:{label:"用户ID",prop:"id"}},[s("el-input",{attrs:{placeholder:"请输入一个ID作为名称"},model:{value:t.registForm.id,callback:function(e){t.$set(t.registForm,"id",e)},expression:"registForm.id"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.registForm.pwd,callback:function(e){t.$set(t.registForm,"pwd",e)},expression:"registForm.pwd"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{placeholder:"请再次输入密码","show-password":""},model:{value:t.registForm.checkPass,callback:function(e){t.$set(t.registForm,"checkPass",e)},expression:"registForm.checkPass"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitReForm("registForm")}}},[t._v("注册")]),s("el-button",{on:{click:function(e){return t.resetForm("registForm")}}},[t._v("重置")])],1)],1)],1)])},x=[],$=(s("b0c0"),s("d3b7"),s("6062"),s("3ca3"),s("ddb0"),{data:function(){var t=this,e=function(e,s,i){""===s&&i(new Error("请输入一个用户名")),t.axios.get("/user/checkid?id=".concat(s)).then((function(t){200==t.data.code?i(new Error("用户名已存在！！！")):i()}))},s=function(e,s,i){""===s?i(new Error("请再次输入密码")):s!==t.registForm.pwd?i(new Error("两次输入密码不一致!")):i()};return{localPhone:"",isActive:!0,ruleForm:{name:"",pwd:""},registForm:{name:"",pwd:"",id:"",checkPass:""},rules:{name:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"错误手机号",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],checkPass:[{required:!0,validator:s,trigger:"blur"}],id:[{required:!0,validator:e,trigger:"blur"}]}}},methods:{login:function(){this.isActive=!0},regist:function(){this.isActive=!1},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.axios.post("/user/login",{phone:e.ruleForm.name,pwd:e.ruleForm.pwd}).then((function(t){if(console.log(t.data),200==t.data.code){if(e.$store.commit("updateUser",t.data.data[0].name),sessionStorage.setItem("userName",t.data.data[0].name),localStorage.getItem("PhoneName")){var s=JSON.parse(localStorage.getItem("PhoneName"));console.log(s),s.push(e.ruleForm.name),s=new Set(s),console.log(s),localStorage.setItem("PhoneName",JSON.stringify(s))}else localStorage.setItem("PhoneName",JSON.stringify([e.ruleForm.name]));e.$router.push("/")}else alert("账号或者密码错误！！！")}))}))},resetForm:function(t){this.$refs[t].resetFields()},submitReForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.axios.post("/user/regist",{phone:e.registForm.name,pwd:e.registForm.pwd,id:e.registForm.id}).then((function(t){console.log(t.data),200==t.data.code?(e.$store.commit("updateUser",e.registForm.id),e.$router.push("/")):alert("注册失败！！！")}))}))}},created:function(){console.log("进入login生命周期"),localStorage.getItem("PhoneName")&&(this.localPhone=JSON.parse(localStorage.getItem("PhoneName")))},beforeCreate:function(){console.log("进入loginbefore生命周期")},mounted:function(){console.log("进入loginmounted生命周期")}}),S=$,C=(s("bb9f"),Object(h["a"])(S,w,x,!1,null,"21d776d2",null)),F=C.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",[s("el-header",[s("div",{staticClass:"page",on:{click:t.goBack}},[s("i",{staticClass:"el-icon-back"}),s("span",[t._v("返回")])])]),s("el-main",[s("el-image",{attrs:{src:t.picture,"preview-src-list":t.picarr}}),s("div",{staticStyle:{width:"50vw"}},[s("div",{staticClass:"name"},[t._v(t._s(t.name))]),s("div",{staticClass:"price"},[t._v("¥ "+t._s(t._f("shopPrice")(t.price)))]),s("div",{staticClass:"sku"},[s("div",[t._v("商品规格1：")]),t._l(t.sku1,(function(e,i){return[s("el-radio",{key:i,attrs:{border:"",label:i,disabled:t.sku1true[e]},on:{change:t.updataSku1},model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[s("span",{staticStyle:{color:"white"}},[t._v(t._s(e))])])]})),t.sku2[0]?s("div",{staticStyle:{"margin-top":"2%"}},[t._v("商品规格2："),s("br"),t._l(t.sku2,(function(e,i){return[s("el-radio",{key:i,attrs:{border:"",label:i,disabled:t.sku2true[e]},on:{change:t.updataSku2},model:{value:t.radio2,callback:function(e){t.radio2=e},expression:"radio2"}},[s("span",{staticStyle:{color:"white"}},[t._v(t._s(e))])])]}))],2):t._e(),t.sku3[0]?s("div",{staticStyle:{"margin-top":"2%"}},[t._v("商品规格3："),s("br"),t._l(t.sku3,(function(e,i){return[s("el-radio",{key:i,attrs:{border:"",label:i,disabled:t.sku3true[e]},on:{change:t.updataSku3},model:{value:t.radio3,callback:function(e){t.radio3=e},expression:"radio3"}},[s("span",{staticStyle:{color:"white"}},[t._v(t._s(e))])])]}))],2):t._e()],2),s("div",{staticClass:"number"},[s("div",{staticClass:"i"},[s("i",{staticClass:"el-icon-minus",on:{click:function(e){return t.numShop(-1)}}})]),t._v(" "+t._s(t.number)+" "),s("div",{staticClass:"i"},[s("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.numShop(1)}}})])]),s("div",{staticClass:"btn"},[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.buy}},[t._v("购买")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.shoplist}},[t._v("加入购物车")])],1)])],1),s("el-footer",[s("router-link",{attrs:{to:{name:"comment",params:{id:this.$route.params.id}},tag:"el-button"}},[t._v("查看评论")]),s("comment",{attrs:{id:this.$route.params.id}})],1)],1)},N=[],O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.firstarr.length?s("el-main",t._l(t.firstarr,(function(e){return s("div",{key:e.id},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"content"},[t._v(t._s(e.content))]),s("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(s){return t.open(e.id)}}},[t._v(" 评论回复 ")]),s("div",{staticStyle:{clear:"both"}}),t._l(t.secondarr[e.id],(function(e){return s("div",{key:e.id,staticStyle:{"margin-left":"45px"}},[s("div",[t._v(t._s(e.name))]),s("div",{staticClass:"content"},[t._v(t._s(e.content))])])}))],2)})),0):s("div",{staticStyle:{margin:"0 40vw"}},[t._v("该商品目前没有评论")]),s("el-drawer",{attrs:{title:"评论回复",visible:t.drawer,"with-header":!1,direction:"btt","before-close":t.handleClose},on:{"update:visible":function(e){t.drawer=e}}},[s("div",{staticStyle:{width:"300px",margin:"30px auto"}},[s("div",{staticStyle:{color:"#000"}},[t._v("请输入评论：")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.submit}},[t._v("回复")])],1)])],1)},j=[],E=(s("a4d3"),s("e01a"),{props:["id"],data:function(){return{num:0,drawer:!1,firstarr:[],secondarr:{},value:""}},methods:{handopen:function(t){this.name[t]},open:function(t){this.drawer=!0,this.num=t,this.value="",console.log(this.num)},handleClose:function(t){var e=this;this.$confirm("编辑不会保留,确认关闭？").then((function(s){e.value="",t()})).catch((function(t){}))},submit:function(){var t=this;this.$store.state.user?this.axios.post("/product/insertComment",{sid:this.num,shopid:this.id,name:this.$store.state.user,content:this.value}).then((function(e){200==e.data.code?(t.$notify({title:"成功",message:"回复成功！",type:"success"}),t.secondarr[t.num].push({id:Symbol(1),sid:t.num,shopid:t.id,name:t.$store.state.user,content:t.value}),t.drawer=!1):t.$notify({title:"失败",message:"回复失败！",type:"error"})})):this.$router.push("/login")}},created:function(){var t=this;this.axios.get("/product/comment",{params:{id:this.id}}).then((function(e){console.log(e.data),t.firstarr=e.data.firstarr,t.secondarr=e.data.secondarr}))}}),A=E,I=(s("ea8c"),Object(h["a"])(A,O,j,!1,null,"22e842d4",null)),D=I.exports,J={data:function(){return{name:"",price:"",picture:"",picarr:[],sku1:[],sku1true:[],sku2:[],sku2true:[],sku3:[],sku3true:[],stock0:[],number:0,radio1:-1,radio2:-1,radio3:-1,sid:-1}},components:{comment:D},methods:{buy:function(){if(this.$store.state.user){if(-1!==this.sid&&0!==this.number){var t=[{id:this.sid,number:this.number}];this.$router.push({name:"buy",params:{shop:JSON.stringify(t)}})}}else this.$router.push("/login")},shoplist:function(){var t=this;this.$store.state.user?-1!==this.sid&&0!==this.number?this.axios.post("/order/insertList",{sid:this.sid,num:this.number,sname:this.name,uname:this.$store.state.user}).then((function(e){200===e.data.code&&t.$notify({title:"成功",message:"加入购物车成功，请到购物车查看！",type:"success"})})):this.$notify({title:"失败",message:"请务必选上规格和数量！",type:"warning"}):this.$router.push("/login")},selectPrice:function(){var t=this;this.axios.post("/product/price",{sid:this.$route.params.id,sku1:this.sku1[this.radio1],sku2:this.sku2[this.radio2],sku3:this.sku3[this.radio3]}).then((function(e){t.price=e.data[0].price,t.sid=e.data[0].id}))},numShop:function(t){this.number=this.number+t,this.number<0&&(this.number=0)},goBack:function(){this.$router.go(-1)},updataSku1:function(t){for(var e=[],s=[],i=0;i<this.stock0.length;i++)this.sku1[t]===this.stock0[i][0]&&(e[this.stock0[i][1]]=!0,s[this.stock0[i][2]]=!0);this.sku2true=e,this.sku3true=s,this.sku3[0]?-1!==this.radio2&&-1!==this.radio3&&this.selectPrice():this.sku2[0]?-1!==this.radio2&&this.selectPrice():this.selectPrice()},updataSku2:function(t){for(var e=[],s=[],i=0;i<this.stock0.length;i++)this.sku2[t]===this.stock0[i][1]&&(e[this.stock0[i][0]]=!0,s[this.stock0[i][2]]=!0);this.sku1true=e,this.sku3true=s,this.sku3[0]?-1!==this.radio1&&-1!==this.radio3&&this.selectPrice():-1!==this.radio1&&this.selectPrice()},updataSku3:function(t){for(var e=[],s=[],i=0;i<this.stock0.length;i++)this.sku1[t]===this.stock0[i][0]&&(e[this.stock0[i][0]]=!0,s[this.stock0[i][1]]=!0);this.sku2true=e,this.sku3true=s,-1!==this.radio1&&-1!==this.radio2&&this.selectPrice()}},created:function(){var t=this;this.axios.get("/product/shopSku?id=".concat(this.$route.params.id)).then((function(e){console.log(e.data),t.sku1=e.data.sku1,t.sku2=e.data.sku2,t.sku3=e.data.sku3,t.stock0=e.data.stock0,t.name=e.data.shop[0].name,t.price=e.data.shop[0].price,t.picture="/api/"+e.data.shop[0].picture,t.picarr.push(t.picture)}))}},L=J,U=(s("4908"),Object(h["a"])(L,P,N,!1,null,"2f0383b2",null)),z=U.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-tabs",{staticStyle:{color:"red","background-color":"white"},attrs:{"tab-position":"left"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"用户管理",name:"first"}},[s("div",{staticClass:"card"},[t.anim?s("div",{key:"updata",staticClass:"xinxi"},[s("div",[t._v("欢迎 "+t._s(t.name)+" 渔友")]),s("div",[t._v("手机号: "+t._s(t.phone))]),s("div",[t._v("密码: "),s("el-input",{attrs:{type:"password",placeholder:"请修改密码"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1),s("div",[t._v("地址: "),s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.adress,callback:function(e){t.adress=e},expression:"adress"}})],1),s("div",[s("el-button",{staticStyle:{width:"5em"},attrs:{plain:""},on:{click:function(e){return t.confirm(1)}}},[t._v("确认")]),s("el-button",{staticStyle:{width:"5em"},attrs:{plain:""},on:{click:t.confirm}},[t._v("取消")])],1)]):s("div",{key:"save",staticClass:"xinxi"},[s("div",[t._v("欢迎 "+t._s(t.name)+" 渔友")]),s("div",[t._v("手机号: "+t._s(t.phone))]),s("div",[t._v("地址: "+t._s(t.adress))]),s("el-button",{staticStyle:{width:"5em"},attrs:{plain:""},on:{click:t.updata}},[t._v("修改")])],1)])])],1)],1)},M=[],V={data:function(){return{name:"",phone:"",adress:"",pwd:"",anim:!1,activeName:"first"}},methods:{updata:function(){this.anim=!0,this.pwd=""},confirm:function(t){var e=this;if(1==t){if(!this.pwd)return void this.$notify({title:"警告",message:"密码不要为空！",type:"warning"});this.axios.post("/user/updateUser",{password:this.pwd,adress:this.adress,name:this.name}).then((function(t){if(200==t.data.code)return e.$notify({title:"成功",message:"修改成功！",type:"success"}),void(e.anim=!1)}))}this.anim=!1},handleClick:function(t,e){console.log(t,e)}},created:function(){var t=this;console.log("userDetail组件进入创建"),this.axios.get("/user/searchByname?name=".concat(this.$store.state.user)).then((function(e){200===e.data.code&&(t.name=e.data.data[0].name,t.phone=e.data.data[0].phone,t.adress=e.data.data[0].adress)}))},beforeCreate:function(){console.log("userDetail组件",this.$store.state.user),this.$store.state.user||this.$router.push("/login")},destroyed:function(){console.log("userDetail组件已经销毁！")},mounted:function(){console.log("userDetail组件已经加载！")}},B=V,T=(s("9e17"),Object(h["a"])(B,q,M,!1,null,"70761e12",null)),R=T.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("h1",[t._v("订单")]),s("div",[t._v("收货电话:")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"text",domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),s("div",[t._v("收货地址:")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.adress,expression:"adress"}],staticClass:"text",domProps:{value:t.adress},on:{input:function(e){e.target.composing||(t.adress=e.target.value)}}}),s("div",[t._v("购买商品:")]),t._l(t.shop_arr,(function(e){return s("div",{key:e.id,staticClass:"card"},[s("div",{staticStyle:{width:"20vw"}},[t._v(t._s(t._f("skuName")(e.sku1+e.sku2+e.sku3)))]),s("span",{staticClass:"num"},[t._v("X "+t._s(e.number))]),s("div",{staticClass:"pri"},[t._v("价格:"+t._s(e.price))]),s("div",{staticStyle:{clear:"both"}})])})),s("div",{staticStyle:{"margin-top":"3px","margin-bottom":"3px"}},[t._v("金额总数: "),s("span",{staticStyle:{color:"red","font-weight":"700","font-size":"large"}},[t._v(t._s(t.snum))])]),s("el-button",{on:{click:function(e){t.dialogVisible=!0}}},[t._v("购买")]),s("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("span",[t._v("是否确认购买？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.buy}},[t._v("确 定")])],1)])],2)},W=[],X=(s("13d5"),{props:["shop"],data:function(){return{dialogVisible:!1,shop_arr:[],phone:"123",adress:"初始值"}},computed:{snum:function(){return this.shop_arr.reduce((function(t,e){return t+Number(e.price)*Number(e.number)}),0)}},methods:{buy:function(){var t=this,e=JSON.parse(this.shop);console.log(e),this.axios.post("/order/insertOrder",{shop:e,name:this.$store.state.user}).then((function(e){console.log(e.data),200==e.data.code&&(t.$notify({title:"成功",message:"购买成功，返回主页面",type:"success"}),t.$router.push("/"))})),this.dialogVisible=!1},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))}},created:function(){var t=this,e=JSON.parse(this.shop);console.log(e),e instanceof Array?this.axios.post("/order/selectShop",{shop:e}).then((function(e){t.shop_arr=e.data})):this.$router.push("/"),console.log(this.$store.state.user),this.$store.state.user&&this.axios.get("/user/searchByname",{params:{name:this.$store.state.user}}).then((function(e){console.log(e.data),t.phone=e.data.data[0].phone,t.adress=e.data.data[0].adress}))},beforeCreate:function(){this.$store.state.user||this.$router.push("/login")}}),G=X,K=(s("f02c"),Object(h["a"])(G,H,W,!1,null,"26ff945d",null)),Q=K.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-main",[s("div",[s("input",{attrs:{type:"checkbox",id:"checkall"},domProps:{checked:t.check_all},on:{change:t.checkall}}),s("label",{attrs:{for:"checkall"}},[t._v("全选")])]),t._l(t.shop_arr,(function(e,i){return[s("div",{key:t.Symbol(e.id),staticClass:"shopcheck"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.check_arr[i],expression:"check_arr[index]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.check_arr[i])?t._i(t.check_arr[i],null)>-1:t.check_arr[i]},on:{change:[function(e){var s=t.check_arr[i],n=e.target,r=!!n.checked;if(Array.isArray(s)){var o=null,a=t._i(s,o);n.checked?a<0&&t.$set(t.check_arr,i,s.concat([o])):a>-1&&t.$set(t.check_arr,i,s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.check_arr,i,r)},function(e){return t.check_quanxuan()}]}}),s("shop",{attrs:{"data-arr":e,index:i},on:{num:t.num}})],1)]})),t._v(" 总价格:"+t._s(t.snum)+" "),s("el-button",{on:{click:t.buy}},[t._v("确定")])],2)},Z=[],tt=(s("a623"),s("4160"),s("d81d"),s("25f0"),s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("div",{staticStyle:{width:"20vw"}},[t._v(t._s(t.shop.sname))]),s("div",{staticStyle:{width:"20vw"}},[t._v("规格： "+t._s(t._f("skuName")(t.sku)))]),s("div",{staticClass:"number"},[s("div",{staticClass:"i"},[s("i",{staticClass:"el-icon-minus",on:{click:function(e){return t.numShop(-1)}}})]),t._v(" "+t._s(t.shop.num)+" "),s("div",{staticClass:"i"},[s("i",{staticClass:"el-icon-plus",on:{click:function(e){return t.numShop(1)}}})])]),s("div",{staticClass:"pri"},[t._v("价格:"+t._s(t.shop.price*t.shop.num))]),s("div",{staticStyle:{clear:"both"}})])}),et=[],st={props:["dataArr","index"],data:function(){return{shop:this.dataArr,sku:""}},methods:{numShop:function(t){this.shop.num=this.shop.num+t,this.shop.num<0&&(this.shop.num=0),this.$emit("num",this.shop.num,this.index)}},beforeMount:function(){var t=this;console.log("this.$parent :>> ",this.$parent),this.axios.post("/product/skuName",{skuid:this.shop.skuid}).then((function(e){t.sku=e.data[0].sku1+e.data[0].sku2+e.data[0].sku3}))}},it=st,nt=(s("2454"),Object(h["a"])(it,tt,et,!1,null,"0f7e9c4e",null)),rt=nt.exports,ot={components:{shop:rt},data:function(){return{shop_arr:[],check_arr:[],check_all:!1}},watch:{shop_arr:function(){}},computed:{snum:function(){var t=this;return this.shop_arr.reduce((function(e,s,i){return t.check_arr[i]?e+Number(s.price)*Number(s.num):e}),0)}},methods:{num:function(t,e){this.shop_arr[e].num=t},buy:function(){var t=this;console.log(this.check_arr);var e=[];this.check_arr.forEach((function(s,i){s&&e.push({id:Number(t.shop_arr[i].skuid),number:t.shop_arr[i].num})})),this.$router.push({name:"buy",params:{shop:JSON.stringify(e)}})},Symbol:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return Symbol(t)})),checkall:function(){this.check_all=!this.check_all,this.check_all?this.check_arr=this.check_arr.map((function(){return!0})):this.check_arr=this.check_arr.map((function(){return!1}))},check_quanxuan:function(){this.check_arr.every((function(t){return!!t}))?this.check_all=!0:this.check_all=!1}},created:function(){var t=this;console.log("this.children :>> ",this.$children),console.log("this.$options :>> ",this.$options),console.log("shopList组件的生命周期"),this.axios.post("/order/selectShopList",{uname:this.$store.state.user}).then((function(e){t.shop_arr=e.data,t.check_arr=t.shop_arr.map((function(t){return!1}))}))},beforeCreate:function(){this.$store.state.user||this.$router.push("/login")},xiaoxiao:123},at=ot,ct=(s("14b3"),Object(h["a"])(at,Y,Z,!1,null,"3753fd58",null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",[s("el-main",[t._l(t.msgarr,(function(e,i){return[s("div",{key:i},[s("p",{class:e.type,domProps:{innerHTML:t._s(e.msg)}}),s("div",{staticStyle:{clear:"both"}})])]}))],2),s("el-footer",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],attrs:{type:"text"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),s("button",{on:{click:t.send}},[t._v("发送")])])],1)},dt=[],ht={data:function(){return{ws:"",msg:"",msgarr:[]}},methods:{send:function(){console.log("发送消息"),this.msg&&(this.msgarr.push({msg:this.msg,type:"user"}),this.ws.send(this.msg),this.msg="")}},mounted:function(){var t=this;this.ws=new WebSocket("ws://localhost:3000/socket"),this.ws.onopen=function(){console.log("@open")},this.ws.onmessage=function(e){console.log("@message"),console.log(e.data),t.msgarr.push({msg:e.data,type:"client"})},this.ws.onclose=function(){console.log("@close")},this.ws.onerror=function(){console.log("@error")}},destroyed:function(){this.ws.close()}},pt=ht,mt=(s("e000"),Object(h["a"])(pt,lt,dt,!1,null,"cbae7cdc",null)),ft=mt.exports,vt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},gt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{action:"/api/user/login",method:"post"}},[s("input",{attrs:{id:"phone",name:"phone",type:"text"}}),s("input",{attrs:{id:"pwd",name:"pwd",type:"text"}}),s("button",{attrs:{type:"submit"}},[t._v("1")])])}],_t={},bt=_t,kt=Object(h["a"])(bt,vt,gt,!1,null,null,null),yt=kt.exports;i["default"].use(f["a"]);var wt=new f["a"]({mode:"history",routes:[{path:"/",name:"main",component:y},{path:"/login",name:"login",component:F},{path:"/shopDetail/:id",name:"shopDetail",component:z},{path:"/userDetail",name:"userDetail",component:R},{path:"/comment/:id",name:"comment",component:D,props:!0},{path:"/buy/:shop",name:"buy",component:Q,props:!0,meta:{login:!0}},{path:"/shopList",name:"shopList",component:ut,meta:{login:!0}},{path:"/socket",name:"socket",component:ft},{path:"/ceshi",component:yt},{path:"*",redirect:"/"}]});wt.beforeEach((function(t,e,s){if(console.log("进入beforeEach"),t.matched.some((function(t){return t.meta.login}))){if(sessionStorage.getItem("userName"))return s();s({name:"login"})}else s()}));var xt=wt,$t=s("2f62");i["default"].use($t["a"]);var St={user:""},Ct={updateUser:function(t,e){t.user=e}},Ft=new $t["a"].Store({state:St,mutations:Ct}),Pt=(s("0fae"),s("5c96")),Nt=s.n(Pt);i["default"].use(Nt.a),i["default"].config.productionTip=!1,i["default"].filter("shopName",(function(t){return t.length>40?t.slice(0,40)+"...":t})),i["default"].filter("shopPrice",(function(t){return new Number(t).toFixed(2)})),i["default"].filter("skuName",(function(t){return t.replace(/(null)*$/g,"")})),new i["default"]({el:"#app",router:xt,store:Ft,components:{App:m},template:"<App/>"})},"5d88":function(t,e,s){},6140:function(t,e,s){},"720c":function(t,e,s){},"85ec":function(t,e,s){},"9e17":function(t,e,s){"use strict";var i=s("dd3f"),n=s.n(i);n.a},bb9f:function(t,e,s){"use strict";var i=s("1619"),n=s.n(i);n.a},d969:function(t,e,s){"use strict";var i=s("f4af"),n=s.n(i);n.a},dd3f:function(t,e,s){},e000:function(t,e,s){"use strict";var i=s("300d"),n=s.n(i);n.a},ea8c:function(t,e,s){"use strict";var i=s("1ed9"),n=s.n(i);n.a},edf4:function(t,e,s){},f02c:function(t,e,s){"use strict";var i=s("720c"),n=s.n(i);n.a},f4af:function(t,e,s){}});
//# sourceMappingURL=app.75d59554.js.map